<h2 class="section-title">Create An NFT</h2>
<section class="profile-main create-item">
  <div class="site-wrapper">
    <div class="form-wrapper">
      <form class="overflow-hidden dark-theme" [formGroup]="createProductForm">
        <div class="group-fields">
          <div class="field-row">
            <span class="label">
              Image <i class="required">*</i>
              <span>File types supported: JPG, PNG, GIF, SVG</span>
            </span>

            <div class="file-upload-wrapper">
              <input id="image" (change)="onChange($event)" type="file" multiple />
              <div class="icon-wrapper" [class.update]="fileUrl">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="rgb(229, 232, 235)">
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"
                  />
                </svg>
              </div>
              <img *ngIf="fileUrl" [src]="fileUrl" class="product-image" />
            </div>
          </div>
          <div class="field-row">
            <span class="label"> Name <i class="required">*</i> </span>
            <mat-form-field class="flex-auto gt-xs:pr-3 col-md-12">
              <input id="username" matInput [formControlName]="'name'" />
              <mat-error *ngIf="createProductForm.get('name').hasError('required')"> Name is required </mat-error>
            </mat-form-field>
          </div>
          <div class="field-row">
            <span class="label">
              Description <i class="required">*</i>
              <span>The description will be included on the item's detail page underneath its image.</span>
            </span>
            <mat-form-field class="flex-auto gt-xs:pr-3 col-md-12">
              <textarea id="desc" matInput [formControlName]="'description'" [rows]="3" matTextareaAutosize></textarea>
              <mat-error *ngIf="createProductForm.get('description').hasError('required')"> Description is required </mat-error>
            </mat-form-field>
          </div>
          <div class="field-row">
            <span class="label"> Collection <i class="required">*</i> </span>
            <mat-form-field class="flex-auto gt-xs:pr-3 col-md-12">
              <mat-select [formControlName]="'selectedCollection'">
                <mat-option *ngFor="let collection of collections" [value]="collection.name">
                  {{ collection.name }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div class="field-row">
            <span class="label"> Supply <i class="required">*</i> </span>
            <mat-form-field class="flex-auto gt-xs:pr-3 col-md-12">
              <input type="number" id="username" matInput [formControlName]="'supply'" />
              <mat-error *ngIf="createProductForm.get('supply').hasError('required')"> Supply is required </mat-error>
            </mat-form-field>
          </div>

          <div class="field-row metadata">
            <span class="label">
              Metadata
              <span> Fill out the attributes below to specify the metadata for your non-fungible token. </span>
            </span>
            <form [formGroup]="propertiesForm">
              <div class="two-col-fields">
                <mat-form-field class="flex-auto gt-xs:pr-3 col-md-4">
                  <mat-label class="small">Key<span class="required">*</span></mat-label>
                  <input id="name" matInput [formControlName]="'name'" />
                  <mat-error *ngIf="propertiesForm.get('name').hasError('required')"> Name is required </mat-error>
                </mat-form-field>
                <mat-form-field class="flex-auto gt-xs:pr-3 col-md-7" style="margin-left: 10px">
                  <mat-label class="small">Value<span class="required">*</span></mat-label>
                  <input id="username" matInput [formControlName]="'value'" />
                  <mat-error *ngIf="propertiesForm.get('value').hasError('required')"> Value is required </mat-error>
                </mat-form-field>
                <button class="col-md-1 btn add" (click)="addToProperties()">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="#fff">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                  </svg>
                </button>
              </div>
            </form>
            <div class="metadata-list">
              <div class="property" *ngFor="let property of properties">
                <div class="info">
                  <span class="key">{{ property.name }}</span>
                  <span class="value">{{ property.value }}</span>
                </div>
                <div class="remove" (click)="deleteProperty(i)">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                </div>
              </div>
            </div>
          </div>
          <button class="btn primary" [disabled]="createProductForm.disabled" (click)="createProduct()">
            <span> Create </span>
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="#fff">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
            </svg>
          </button>
        </div>
      </form>
    </div>
  </div>
</section>
